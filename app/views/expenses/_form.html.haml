.row
  .col-md-8
    = minimal_form_for @expense do |f|
      = f.error_notification
      .box.box-primary
        .box-body
          .form-group
            .input-group.date
              .input-group-addon
                %i.fa.fa-calendar
              = f.input :operation_date, as: :string, input_html: { class: 'datepicker form-control pull-right', value: Date.today }
            %br
            .input-group
              = f.input :value, autofocus: true
              %span.input-group-addon PLN
            %br
            = f.association :subcategory, collection: Category.expense, as: :grouped_select, group_method: :subcategories, prompt: "Choose a Category"
            = f.input :description, as: :text
            = f.input :tag_list
            = f.association :user, collection: User.all, label_method: :email, prompt: current_user.email
            = f.input :to_divide, inline_label: 'To divide?'

            = f.button :submit, class: 'btn btn-primary'
            = link_to 'cancel', expenses_path, class: 'btn btn-default'

:javascript
  jQuery( document ).ready(function( $ ) {
    $('#expense_tag_list').tokenfield({
      autocomplete: {
        source: #{ActsAsTaggableOn::Tag.most_used.pluck(:name)},
        delay: 100
      },
      showAutocompleteOnFocus: true
    })
    $('.datepicker').datepicker({ autoclose: true, dateFormat: 'dd-mm-yy' });
  });
